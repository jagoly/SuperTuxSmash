os: linux
dist: focal
language: cpp

addons:
  apt:
    packages:
      - libsfml-system2.5
      - libsfml-window2.5
      - libsfml-dev
      - libglfw3-dev

before_script:
  - cd /home/travis/build/jagoly

  - wget -O vulkan-sdk.tar.gz https://sdk.lunarg.com/sdk/download/1.2.170.0/linux/vulkansdk-linux-x86_64-1.2.170.0.tar.gz
  - tar -xzf vulkan-sdk.tar.gz
  - source 1.2.170.0/setup-env.sh

  - git clone --depth 1 --branch vulkan https://github.com/jagoly/sqee.git
  - mkdir sqee/build && cd sqee/build
  - cmake ..
  - cmake --build . --target sqee

script:
  - cd /home/travis/build/jagoly/SuperTuxSmash
  - mkdir build && cd build
  - cmake .. -DSQEE_BUILD_ROOT=/home/travis/build/jagoly/sqee/build
  - cmake --build .

